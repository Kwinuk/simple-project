<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>register</title>

    <!-- Favicon -->
    <link rel="icon" href="img/core-img/favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">

</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap');

    .button-container {
        font-family: 'Noto Sans KR', sans-serif;
    }

    .button {
        background: var(--button-bg-color);
        color: var(--button-color);
        margin: 0;
        padding: 0.5rem 1rem;
        font-size: 1rem;
        border: none;
        border-radius: 4px;
        display: inline-block;
        width: auto;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        cursor: pointer;
        transition: 0.5s;
    }

    .button-register {
        /* Additional styles specific to the "button-register" class */
    }

    /* Define the custom CSS variables */
    :root {
        --button-color: #ffffff;
        --button-bg-color: #0d6efd;
        --button-hover-bg-color: #025ce2;
    }

    @font-face {
        font-family: 'NanumSquareNeo-Variable';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/NanumSquareNeo-Variable.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
    }

    p {
        font-family: 'NanumSquareNeo-Variable', sans-serif;
    }

    h2 {
        font-family: 'NanumSquareNeo-Variable', sans-serif;
    }

    a {
        font-family: 'NanumSquareNeo-Variable', sans-serif;
    }
</style>

<body>
<!-- Preloader -->
<div class="preloader d-flex align-items-center justify-content-center">
    <div class="lds-ellipsis">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>

<!-- ##### Header Area Start ##### -->
<header class="header-area">
    <!-- Navbar Area -->
    <div id="sticky-wrapper" class="sticky-wrapper" style="height: 85px;">
        <div class="oneMusic-main-menu">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Menu -->
                    <nav class="classy-navbar justify-content-between" id="oneMusicNav">

                        <!-- Nav brand -->
                        <a href="/index" class="nav-brand" style="margin-top: 30px"><img
                                src="img/core-img/xcurenetlogo.png" alt=""></a>

                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>

                        <!-- Menu -->
                        <div class="classy-menu">

                            <!-- Close Button -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>

                            <!-- Nav Start -->
                            <div class="classynav">
                                <!-- Login/Register & Cart Button -->
                                <th:block th:if="${session.userInfo != null}">
                                    <div class="login-register-cart-button d-flex align-items-center"
                                         style="margin-top: 40px;">
                                        <div class="login-register-btn">
                                            <a href="" style="transform: translateY(7%);"><p
                                                    style="color : black; align-content: center; font-size: 20px; font-weight : bold; margin-top: 10px;" th:value="${session.userName}">
                                            </p></a>
                                            <a href="/exit" style="transform: translateY(7%); margin-right: 4px"><p
                                                    style="color : black; align-content: center; font-size: 20px; font-weight : bold; margin-top: 10px;">
                                                로그아웃</p></a>
                                            <!--                                            <a href="/myPage"><p-->
                                            <!--                                                    style="color : black; align-content: center; font-size: 20px; font-weight : bold; margin-top: 10px;"-->
                                            <!--                                                    th:text="${session.userInfo + ' 님'}"></p></a>-->
                                        </div>
                                    </div>
                                </th:block>
                                <th:block th:if="${session.userInfo == null}">
                                    <div class="login-register-cart-button d-flex align-items-center"
                                         style="margin-top: 40px;">
                                        <div class="login-register-btn" style="margin-right: 10px;">
                                            <a href="/loginPage"><p
                                                    style="color : black; align-content: center; font-size: 20px; font-weight : bold; margin-top: 10px;">
                                                로그인</p></a>
                                        </div>
                                        <div class="login-register-btn">
                                            <a href="/registerPage"><p
                                                    style="color : black; align-content: center; font-size: 20px; font-weight : bold; margin-top: 10px;">
                                                회원가입</p></a>
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                            <!-- Nav End -->

                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- ##### Header Area End ##### -->

<!-- ##### Breadcumb Area Start ##### -->
<section class="breadcumb-area bg-img bg-overlay" style="background-image: url(img/bg-img/breadcumb3.jpg);">
    <div class="bradcumbContent">
        <p></p>
        <h2>Registor</h2>
    </div>
</section>
<!-- ##### Breadcumb Area End ##### -->

<!-- ##### Login Area Start ##### -->
<section class="login-area section-padding-100">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-8">
                <div class="login-content">
                    <h3>정보를 입력해주세요.</h3>
                    <!-- Login Form -->
                    <div class="login-form">
                        <form action="/register" method="post" id="register" name="register_form">
                            <input type="hidden" id="urlBack" name="urlBack" value=""/>
                            <div class="form-group">
                                <label for="userId">아이디</label>
                                <input type="text" class="form-control" name="userId" id="userId"
                                       aria-describedby="emailHelp" placeholder="Enter ID" required>
                                <div class="button-container">
                                    <input type="button" id="idCheckBtn" onclick="checkId()" class="button button-register" style="margin-top: 8px; font-size: 13px; width: 100%; box-sizing: border-box;" value="중복확인">
                                </div>
                            </div>
                            <p class="checkre" align="left" id="outputId">영문자로 시작하는 영문자 또는 숫자 5~12자 </p>
                            <div class="form-group">
                                <label for="userPw">비밀번호</label>
                                <input type="password" class="form-control" name="userPw" id="userPw"
                                       placeholder="Password" required>
                            </div>
                            <p class="checkre" align="left" id="outputPw">8 ~ 16자 영문, 숫자, 특수문자를 최소 한가지씩 조합</p>
                            <div class="form-group">
                                <label for="userRePw">비밀번호 재입력</label>
                                <input type="password" class="form-control" name="userRePw" id="userRePw"
                                       placeholder="Password" required>
                            </div>
                            <p class="checkre" align="left" id="outputRePw"></p>
                            <div class="form-group">
                                <label for="userName">이름</label>
                                <input type="text" class="form-control" name="userName" id="userName"
                                       placeholder="Enter Name" required>
                            </div>
                            <p class="checkre" align="left" id="outputName">
                                이름을 입력해주세요.
                            </p>
                            <div class="form-group">
                                <label for="nickName">닉네임</label>
                                <input type="text" class="form-control" name="nickName" id="nickName"
                                       placeholder="Enter Nick Name" required>
                            </div>
                            <p class="checkre" align="left" id="outputNickName">
                                닉네임을 입력해주세요.
                            </p>
                            <div class="form-group">
                                <label for="address">주소</label>
                                <input type="text" class="form-control" name="address" id="address"
                                       placeholder="address" required>
                            </div>
                            <div class="form-group">
                                <label for="phoneNum">휴대번호</label>
                                <input type="text" class="form-control" name="phoneNum" id="phoneNum"
                                       placeholder="phone" required>
                            </div>
                            <button type="submit" class="btn oneMusic-btn mt-30" onclick="registerButton()">회원가입</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ##### Login Area End ##### -->

<!-- ##### Footer Area Start ##### -->
<footer class="footer-area">
    <div class="container">
        <div class="row d-flex flex-wrap align-items-center">
            <div class="col-12 col-md-6">
                <a href="#"><img src="img/core-img/logo.png" alt=""></a>
                <p class="copywrite-text"><a href="#">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                    All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by
                    <a href="https://colorlib.com" target="_blank">Colorlib</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>

            <div class="col-12 col-md-6">
                <div class="footer-nav">
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Albums</a></li>
                        <li><a href="#">Events</a></li>
                        <li><a href="#">News</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- ##### Footer Area Start ##### -->

<!-- ##### All Javascript Script ##### -->
<!-- jQuery-2.2.4 js -->
<script src="js/jquery/jquery-2.2.4.min.js"></script>
<!-- Popper js -->
<script src="js/bootstrap/popper.min.js"></script>
<!-- Bootstrap js -->
<script src="js/bootstrap/bootstrap.min.js"></script>
<!-- All Plugins js -->
<script src="js/plugins/plugins.js"></script>
<!-- Active js -->
<script src="js/active.js"></script>
<script type="text/javascript">
    $(document).ready(function getURL() {
        var urlBack = document.referrer;
        $('#urlBack').attr('value', urlBack);
    });
</script>
<!-- 정규표현식 검사 -->
<script type="text/javascript">
    const form = document.querySelector('#register')
    const inputId = document.querySelector('#userId')
    const inputName = document.querySelector('#userName')
    const inputPw = document.querySelector('#userPw')
    const inputPw2 = document.querySelector('#userRePw')
    const inputNickName = document.querySelector('#nickName')

    const outputId = document.querySelector('#outputId')
    const outputName = document.querySelector('#outputName')
    const outputPw = document.querySelector('#outputPw')
    const outputPw2 = document.querySelector('#outputRePw')
    const outputNickName = document.querySelector('#outputNickName')
    const reId = /^[a-z]+[a-z0-9]{5,13}$/g
    const reName = /^[가-힣]{2,6}$/
    const rePw =  /^(?=.*[a-zA-z])(?=.*[0-9])(?=.*[$`~!@$!%*#^?&\\(\\)\-_=+]).{8,16}$/
    // 정규표현식 통과 boolean
    var idValid = false; // 아이디 정규식 일치 여부
    var nameValid = false; // 이름 정규식 일치 여부
    var pwValid = false; // 비밀번호 정규식 일치 여부
    var pwSame = false; // 비밀번호 확인 일치 여부

    inputId.addEventListener('input', function () {
        idTrue = false;
        const ok = reId.exec(this.value)
        if (!ok) {
            idTrue = false;
            outputId.textContent = `조건이 맞지 않습니다.`
            outputId.style.color = 'red'
            idValid = false; // id 플래그 false
        } else {
            idTrue = false;
            outputId.textContent = `올바르게 입력하였습니다.`
            outputId.style.color = '#6667AB'
            idValid = true; // id 플래그 true
        }
    })

    inputName.addEventListener('input', function () {
        const ok = reName.exec(this.value)
        if (!ok) {
            outputName.textContent = `이름을 다시 입력해주세요.`;
            outputName.style.color = 'red';
            nameValid = false;
        } else {
            outputName.textContent = `올바르게 입력하셨습니다.`;
            outputName.style.color = '#6667AB';
            nameValid = true;
        }
    })

    inputPw.addEventListener('input', function () {
        const ok = rePw.exec(this.value)
        if (!ok) {
            outputPw.textContent = `비밀번호를 다시 입력해주세요.`;
            outputPw.style.color = 'red';
            pwValid = false;
        } else {
            outputPw.textContent = `올바르게 입력하셨습니다.`;
            outputPw.style.color = '#6667AB';
            pwValid = true;
        }
    })

    inputPw2.addEventListener('input', function () {
        if (inputPw.value == inputPw2.value) {
            outputPw2.textContent = `올바르게 입력하셨습니다.`
            outputPw2.style.color = '#6667AB'
            inputPw.addEventListener('input', function () {
                if (inputPw.value == "") {
                    outputPw2.textContent = `비밀번호가 입력되지 않았습니다.`
                    outputPw2.style.color = 'red'
                    pwSame = false;
                } else if (inputPw.value == inputPw2.value) {
                    outputPw2.textContent = `비밀번호가 일치합니다.`
                    outputPw2.style.color = '#6667AB'
                    pwSame = true;
                } else {
                    outputPw2.textContent = `비밀번호가 일치하지 않습니다.`
                    outputPw2.style.color = 'red'
                    pwSame = false;
                }
            })
            pwSame = true;
        } else {
            outputPw2.textContent = `비밀번호를 다시 입력해주세요.`
            outputPw2.style.color = 'red'
            pwSame = false;
        }
    })

    function register() {
        if (!(idValid && nameValid && pwValid && pwSame)) {
            console.log('아이디' + idValid)
            console.log('이름' + nameValid)
            console.log('비번' + pwValid)
            console.log('비번재확인' + pwSame)
            registerTrue = false;
        } else {
            registerTrue = true;
            console.log(registerTrue)
        }
    }

    <!-- 정규식 스크립트 end -->
</script>

<script>
    function registerButton() {
        const userId = document.getElementById("userId");
        const userPw = document.getElementById("userPw");
        const userRePw = document.getElementById("userRePw");
        const userName = document.getElementById("userName");
        const nickName = document.getElementById("nickName");

        if (userId.value == "") {
            alert("아이디를 입력해주세요.");
            userId.focus();
            return false
        }
        if (userPw.value == "") {
            alert("비밀번호 입력해주세요.");
            userPw.focus();
            return false
        }
        if (userRePw.value == "") {
            alert("비밀번호를 재입력해주세요.");
            userRePw.focus();
            return false
        }
        if (userName.value == "") {
            alert("이름을 입력해주세요.");
            userName.focus();
            return false
        }
        if (nickName.value == "") {
            alert("닉네임을 입력해주세요.");
            nickName.focus();
            return false
        }
        document.register_form.onsubmit;
        alert("회원가입 성공");


    }


</script>

<!-- 아이디 중복확인 -->
<script type="text/javascript">
    var registerTrue = false;
    var idTrue = false;

    function checkId() {
        console.log('로그 1 : check()라는 JS 함수가 연결되었음');
        var id = $('#userId').val(); // $('id 속성이 id인 요소')의 값을 불러올래!
        $.ajax({
            type: 'POST',
            url: '/checkId',
            data: {userId: id},
            success: function (result) {
                console.log(result)
                if (id == "" || !(reId.exec(id))) {
                    // outputId.textContent = `아이디를 다시 입력해주세요.`;
                    // outputId.style.color = 'red';
                } else if (result == 1) {
                    console.log(result)
                    outputId.textContent = `사용 가능한 아이디입니다.`;
                    outputId.style.color = '#6667AB';
                    idTrue = true;
                } else {
                    outputId.textContent = `중복된 아이디가 있습니다.`;
                    outputId.style.color = 'red';
                    idTrue = false;
                }
            },
            error: function (request, status, error) {
                alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
            }
        })
    }
</script>
<!-- 아이디 중복확인 end -->

</body>

</html>